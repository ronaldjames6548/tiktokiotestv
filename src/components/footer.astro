---
import LanguageSelector from "@components/languageselector.astro";
import { menuitems } from "@components/navbar/navbar.astro";
import ThemeSelector from "@components/themeselector.astro";
import logo from "assets/logo.svg";

// Add new built-in i18n imports
import { getLangFromUrl, useTranslations } from "../i18n/utils";
import { getRelativeLocaleUrl } from "astro:i18n";

// Get current language and create translation function
const safeUrl = Astro.url || new URL('/', Astro.site || 'http://localhost:4321');
const lang = getLangFromUrl(safeUrl);
const t = useTranslations(lang);

// Helper function to create localized paths
function localizePath(path: string) {
	if (!path || (path && path.startsWith('http')) || path === '#') return path;
	return getRelativeLocaleUrl(lang, path);
}
---

<footer class="pb-12 pt-8 dark:bg-stone-950">
	<div class="mx-auto max-w-6xl px-6 md:px-12 lg:px-6 xl:px-0">
		<!-- DECOMMENT HERE IF YOU WANT YOUR LOGO IN THE FOOTER -->
		<!-- <a href={localizePath("/")} aria-label="logo" class="group flex items-center justify-center space-x-2">
			<Image class="inline-block" src={logo} alt="Astros" width={30} height={30} />
			<span class="text-semibold duration-300 text-gray-400 group-hover:text-gray-900 dark:text-white dark:group-hover:text-gray-100">
				Astros
			</span>
		</a> -->
		<ul role="list" class="flex flex-wrap items-center justify-center gap-4 py-4 text-gray-600 dark:text-white sm:gap-8">
			<li role="listitem">
				<a href={localizePath("/")} class="duration-300 hover:text-gray-900 dark:hover:text-gray-100">Home</a>
			</li>
			<li role="listitem">
				<a href={localizePath("/about")} class="duration-300 hover:text-gray-900 dark:hover:text-gray-100">About Us</a>
			</li>
			<li role="listitem">
				<a href={localizePath("/contact")} class="duration-300 hover:text-gray-900 dark:hover:text-gray-100">Contact Us</a>
			</li>
			<li role="listitem">
				<a href={localizePath("/privacy-policy")} class="duration-300 hover:text-gray-900 dark:hover:text-gray-100">Privacy Policy</a>
			</li>
			{
				menuitems.map(
					(item) =>
						item &&
						item.path && (
							<li role="listitem">
								<a href={localizePath(item.path)} class="duration-300 hover:text-gray-900 dark:hover:text-gray-100">
									{t(item.title)}
								</a>
							</li>
						)
				)
			}
		</ul>
		
		<!-- ============================================ -->
		<!-- OPTIMIZED SCHEMA MARKUP FOR BETTER SERP -->
		<!-- ============================================ -->
		
		<!-- 1. WebSite Schema (CRITICAL - Shows brand name in SERP) -->
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "WebSite",
			"name": "TikTokio",
			"alternateName": "TikTokio - TikTok Video Downloader",
			"url": "https://tiktokio.cam",
			"description": "Download TikTok videos without watermark in HD quality. Free, fast, and unlimited downloads.",
			"potentialAction": {
				"@type": "SearchAction",
				"target": {
					"@type": "EntryPoint",
					"urlTemplate": "https://tiktokio.cam/?url={search_term_string}"
				},
				"query-input": "required name=search_term_string"
			},
			"inLanguage": "en-US"
		}
		</script>
		
		<!-- 2. Organization Schema -->
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "Organization",
			"name": "TikTokio",
			"url": "https://tiktokio.cam",
			"logo": "https://tiktokio.cam/apple-touch-icon-180x180.webp",
			"image": "https://tiktokio.cam/meta/opengraph.webp",
			"description": "TikTokio is a powerful TikTok downloader that helps users save videos without watermarks in high quality MP4 format.",
			"email": "contact@tiktokio.cam",
			"sameAs": [
				"https://x.com/tiktokio_cam"
			],
			"contactPoint": {
				"@type": "ContactPoint",
				"contactType": "Customer Support",
				"email": "contact@tiktokio.cam"
			}
		}
		</script>
		
		<!-- 3. WebApplication Schema -->
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "WebApplication",
			"name": "TikTokio",
			"alternateName": "TikTokio - TikTok Video Downloader",
			"url": "https://tiktokio.cam",
			"image": "https://tiktokio.cam/images/tiktokio-logo.webp",
			"applicationCategory": "MultimediaApplication",
			"applicationSubCategory": "Video Downloader",
			"operatingSystem": "Web Browser, Windows, Linux, iOS, Android, macOS",
			"browserRequirements": "Requires JavaScript. Requires HTML5.",
			"featureList": [
				"Download TikTok videos without watermark",
				"HD quality video downloads",
				"MP4 and MP3 format support",
				"No registration required",
				"Unlimited free downloads",
				"Cross-platform compatibility"
			],
			"offers": {
				"@type": "Offer",
				"price": "0.00",
				"priceCurrency": "USD"
			},
			"aggregateRating": {
				"@type": "AggregateRating",
				"ratingValue": "4.6",
				"ratingCount": "8173",
				"bestRating": "5",
				"worstRating": "1"
			}
		}
		</script>
		
		<!-- 4. FAQPage Schema (Optimized for SERP) -->
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "FAQPage",
			"mainEntity": [
				{
					"@type": "Question",
					"name": "Is TikTokio free to use?",
					"acceptedAnswer": {
						"@type": "Answer",
						"text": "Yes, TikTokio is completely free with unlimited downloads and no hidden fees. You don't need to create an account or provide payment information to use our service."
					}
				},
				{
					"@type": "Question",
					"name": "Does TikTokio remove watermarks from videos?",
					"acceptedAnswer": {
						"@type": "Answer",
						"text": "Yes, TikTokio automatically removes watermarks and provides clean, high-quality MP4 videos that you can save and share without any branding."
					}
				},
				{
					"@type": "Question",
					"name": "Do I need to create an account?",
					"acceptedAnswer": {
						"@type": "Answer",
						"text": "No, TikTokio works without registration. Simply paste the TikTok video link and download instantly without creating an account."
					}
				},
				{
					"@type": "Question",
					"name": "What video quality does TikTokio support?",
					"acceptedAnswer": {
						"@type": "Answer",
						"text": "TikTokio preserves the original video quality, including HD quality when available. We ensure you get the highest resolution possible from the source."
					}
				},
				{
					"@type": "Question",
					"name": "How long does it take to download a video?",
					"acceptedAnswer": {
						"@type": "Answer",
						"text": "Most videos download within seconds. The exact time depends on your internet speed and video size, but typically takes less than 30 seconds."
					}
				},
				{
					"@type": "Question",
					"name": "Is my data private when using TikTokio?",
					"acceptedAnswer": {
						"@type": "Answer",
						"text": "Yes, we prioritize your privacy. TikTokio doesn't store downloaded videos or track your download history. The process happens through secure connections without requiring personal information."
					}
				},
				{
					"@type": "Question",
					"name": "What devices and browsers are supported?",
					"acceptedAnswer": {
						"@type": "Answer",
						"text": "TikTokio works on all major devices including Windows, Mac, iPhone, iPad, and Android. It's compatible with all modern browsers like Chrome, Firefox, Safari, Edge, and Opera."
					}
				},
				{
					"@type": "Question",
					"name": "Can I download multiple videos at once?",
					"acceptedAnswer": {
						"@type": "Answer",
						"text": "Yes, TikTokio supports batch downloading, allowing you to save multiple videos simultaneously. This feature is perfect for content creators and marketers who need efficient bulk downloads."
					}
				}
			]
		}
		</script>
		
		<!-- 5. BreadcrumbList Schema (for homepage) -->
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "BreadcrumbList",
			"itemListElement": [
				{
					"@type": "ListItem",
					"position": 1,
					"name": "Home",
					"item": "https://tiktokio.cam"
				}
			]
		}
		</script>
		
		<!-- Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-C33KK2QQG5"></script>
		<script is:inline>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'G-C33KK2QQG5');
		</script>
		
		<!-- Social Media Links -->
		<div class="m-auto mt-4 flex w-max items-center justify-between space-x-4 text-gray-500 dark:text-white">
			<a class="duration-300 hover:text-gray-900 dark:hover:text-gray-100" 
			   href="https://x.com/tiktokio_cam" 
			   title="Follow us on Twitter" 
			   target="_blank" 
			   rel="noopener noreferrer"
			   aria-label="Follow TikTokio on Twitter">
				<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="m-auto h-5 w-5" viewBox="0 0 16 16">
					<path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"></path>
				</svg>
			</a>
			<a class="duration-300 hover:text-gray-900 dark:hover:text-gray-100" 
			   href="#" 
			   title="Follow us on Facebook" 
			   target="_blank" 
			   rel="noopener noreferrer"
			   aria-label="Follow TikTokio on Facebook">
				<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="m-auto w-5" viewBox="0 0 16 16">
					<path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"></path>
				</svg>
			</a>
			<a class="duration-300 hover:text-gray-900 dark:hover:text-gray-100" 
			   href="#" 
			   title="Follow us on LinkedIn" 
			   target="_blank" 
			   rel="noopener noreferrer"
			   aria-label="Follow TikTokio on LinkedIn">
				<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="m-auto w-5" viewBox="0 0 16 16">
					<path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.520-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"></path>
				</svg>
			</a>
		</div>
		
		<!-- Copyright -->
		<div class="mt-4 text-center">
			<span class="text-sm tracking-wide text-gray-500 dark:text-white">
				Copyright Â© TikTokio 2025 - Present. All rights reserved
			</span>
		</div>
	</div>
</footer>
